<template>    <span v-if="loaded">        <slot :resource_url="resource_url" :data="data" :loaded="loaded"></slot>    </span></template><script>    /**     * Loads data from resource url and injects in slot.     */    import axios from 'axios'    export default {        name: 'GetData',        props: {            resource_url: {                type: String,  // endpoint for REST query                required: true            }        },        data() {            return {                data: {},                loaded : false,            }        },        methods: {            fetch_data(url){                let headers = {};                if (localStorage.getItem('token')) {                    headers = {                        Authorization: 'Token ' + localStorage.getItem('token')}                }                axios.get(url,{ headers: headers})                .then(response => {                    this.data = response.data;                    this.loaded = true;                })               .catch((err)=>{                   this.data = null;                   console.error(url);                   console.error(err);                   console.log("Request failed with 404, redirecting to 404 page.");                   if (err.response.status === 404) {                       this.$router.push({name: '404'})                   }               })            },        },        created() {            this.fetch_data(this.resource_url);        },        watch : {            resource_url() {                this.fetch_data(this.resource_url)            }        },    }</script><style></style>